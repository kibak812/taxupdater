<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>μ„ΈκΈ λ²•λ Ή ν¬λ΅¤λ§ λ¨λ‹ν„°λ§ μ‹μ¤ν…</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><text y='20' font-size='20'>π“</text></svg>">
</head>
<body>
    <!-- ν—¤λ” -->
    <header class="header">
        <div class="container">
            <h1>π“ μ„ΈκΈ λ²•λ Ή ν¬λ΅¤λ§ λ¨λ‹ν„°λ§ μ‹μ¤ν…</h1>
            <p>λ„λ½μ—†λ” λ°μ΄ν„° μμ§‘κ³Ό μƒλ΅μ΄ λ°μ΄ν„°μ μ •ν™•ν• μ‹λ³„ - μ‹¤μ‹κ°„ μ›Ή λ¨λ‹ν„°λ§</p>
        </div>
    </header>

    <div class="container">
        <!-- μ „μ²΄ ν†µκ³„ μμ—­ -->
        <div class="stats-overview">
            <h3>μ „μ²΄ ν„ν™©</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number">-</span>
                    <span class="stat-description">μ΄ μμ§‘ λ°μ΄ν„°</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">-</span>
                    <span class="stat-description">ν™μ„± μ‚¬μ΄νΈ</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">6</span>
                    <span class="stat-description">λ¨λ‹ν„°λ§ μ‚¬μ΄νΈ</span>
                </div>
            </div>
        </div>

        <!-- μ „μ²΄ μ•΅μ… μμ—­ -->
        <div class="global-actions">
            <h3>π€ ν¬λ΅¤λ§ μ μ–΄</h3>
            <div class="global-buttons">
                <button id="allCrawlBtn" class="btn btn-success">
                    <span class="btn-text">π― μ „μ²΄ μ‚¬μ΄νΈ ν¬λ΅¤λ§</span>
                    <span class="loading" style="display: none;"></span>
                </button>
                <button id="refreshBtn" class="btn btn-secondary">
                    π”„ λ€μ‹λ³΄λ“ μƒλ΅κ³ μΉ¨
                </button>
                <a href="/api/stats" class="btn btn-secondary" target="_blank">
                    π“ μƒμ„Έ ν†µκ³„ λ³΄κΈ°
                </a>
            </div>
        </div>

        <!-- ν¬λ΅¤λ§ μƒνƒ ν‘μ‹ -->
        <div id="crawlStatusContainer" style="display: none;" class="global-actions">
            <h3>β΅ ν¬λ΅¤λ§ μ§„ν–‰ μƒν™©</h3>
            <div id="crawlStatus" style="font-size: 1.1rem; color: #3B82F6; font-weight: 500;">
                λ€κΈ° μ¤‘...
            </div>
            <div class="progress-container">
                <div class="progress-bar" id="crawlProgress"></div>
            </div>
        </div>

        <!-- μ‚¬μ΄νΈλ³„ λ€μ‹λ³΄λ“ -->
        <div id="dashboard" class="dashboard-grid">
            <!-- λ™μ μΌλ΅ μƒμ„±λ¨ -->
            <div class="site-card" style="--site-color: #64748b;">
                <div class="site-header">
                    <div class="site-name">λ°μ΄ν„° λ΅λ”© μ¤‘...</div>
                    <div class="site-status status-empty">μ¤€λΉ„ μ¤‘</div>
                </div>
                <div class="site-stats">
                    <div class="stat-item">
                        <span class="stat-label">μƒνƒ</span>
                        <span class="stat-value">μ΄κΈ°ν™” μ¤‘</span>
                    </div>
                </div>
                <div class="actions">
                    <button class="btn btn-secondary crawl-btn" disabled>
                        <span class="loading"></span>
                        λ΅λ”© μ¤‘...
                    </button>
                </div>
            </div>
        </div>

        <!-- μ‚¬μ© κ°€μ΄λ“ -->
        <div class="global-actions" style="margin-top: 2rem;">
            <h3>π“– μ‚¬μ© κ°€μ΄λ“</h3>
            <div style="text-align: left; max-width: 600px; margin: 0 auto;">
                <p style="margin-bottom: 1rem; color: #64748b; line-height: 1.6;">
                    <strong>κ°λ³„ ν¬λ΅¤λ§:</strong> κ° μ‚¬μ΄νΈ μΉ΄λ“μ "ν¬λ΅¤λ§" λ²„νΌμ„ ν΄λ¦­ν•μ—¬ ν•΄λ‹Ή μ‚¬μ΄νΈλ§ ν¬λ΅¤λ§ν•©λ‹λ‹¤.
                </p>
                <p style="margin-bottom: 1rem; color: #64748b; line-height: 1.6;">
                    <strong>μ „μ²΄ ν¬λ΅¤λ§:</strong> "μ „μ²΄ μ‚¬μ΄νΈ ν¬λ΅¤λ§" λ²„νΌμΌλ΅ 6κ° μ‚¬μ΄νΈλ¥Ό μμ°¨μ μΌλ΅ ν¬λ΅¤λ§ν•©λ‹λ‹¤.
                </p>
                <p style="margin-bottom: 1rem; color: #64748b; line-height: 1.6;">
                    <strong>μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§:</strong> ν¬λ΅¤λ§ μ§„ν–‰ μƒν™©κ³Ό μƒλ΅μ΄ λ°μ΄ν„° λ°κ²¬ μ•λ¦Όμ„ μ‹¤μ‹κ°„μΌλ΅ ν™•μΈν•  μ μμµλ‹λ‹¤.
                </p>
                <p style="color: #64748b; line-height: 1.6;">
                    <strong>μƒμ„Έ λ°μ΄ν„°:</strong> κ° μ‚¬μ΄νΈ μΉ΄λ“μ π“„ λ²„νΌμ„ ν΄λ¦­ν•μ—¬ μμ§‘λ λ°μ΄ν„°λ¥Ό μƒμ„Έν ν™•μΈν•  μ μμµλ‹λ‹¤.
                </p>
            </div>
        </div>

        <!-- μ—°κ²° μƒνƒ ν‘μ‹ -->
        <div id="connectionStatus" style="text-align: center; margin-top: 2rem; color: #64748b; font-size: 0.875rem;">
            π” μ‹¤μ‹κ°„ μ—°κ²° μƒνƒ: <span id="connectionIndicator">μ—°κ²° μ¤‘...</span>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="/static/js/main.js"></script>
    
    <script>
        // μ—°κ²° μƒνƒ μ—…λ°μ΄νΈ
        function updateConnectionStatus(connected) {
            const indicator = document.getElementById('connectionIndicator');
            if (connected) {
                indicator.textContent = 'μ—°κ²°λ¨ β…';
                indicator.style.color = '#10B981';
            } else {
                indicator.textContent = 'μ—°κ²° λμ–΄μ§ β';
                indicator.style.color = '#EF4444';
            }
        }

        // ν¬λ΅¤λ§ μƒνƒ ν‘μ‹/μ¨κΉ€
        function toggleCrawlStatus(show) {
            const container = document.getElementById('crawlStatusContainer');
            if (container) {
                container.style.display = show ? 'block' : 'none';
            }
        }

        // WebSocket μ—°κ²° μƒνƒ λ¨λ‹ν„°λ§
        document.addEventListener('DOMContentLoaded', function() {
            // μ΄κΈ° μ—°κ²° μƒνƒ (λ” μ¤λ κΈ°λ‹¤λ¦Ό)
            setTimeout(() => {
                if (window.app && window.app.isConnected) {
                    updateConnectionStatus(true);
                } else {
                    updateConnectionStatus(false);
                }
            }, 3000);

            // μ£ΌκΈ°μ μΌλ΅ μ—°κ²° μƒνƒ ν™•μΈ
            setInterval(() => {
                if (window.app) {
                    updateConnectionStatus(window.app.isConnected);
                }
            }, 3000);
        });
    </script>
</body>
</html>